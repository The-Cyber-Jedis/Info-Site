<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Student Org | Merch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../styles.css">
  <script src="../.path"></script>
  <script>
    if (window.siteConfig?.pageTitles?.merch) document.title = window.siteConfig.pageTitles.merch;
  </script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <header>
    <h1 id="site-title">Cyber Jedis Shop</h1>
    <nav>
      <ul class="nav-links">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../CONNECT/connect.html">Connect</a></li>
        <li><a href="merch.html">Merch</a></li>
        <li class="dropdown">
          <a href="#">Teams</a>
          <ul class="dropdown-content">
            <li><a href="../TEAMS/EPISODE/episode.html">EPISODE</a></li>
            <li><a href="../TEAMS/ORDER404/order404.html">ORDER404</a></li>
            <li><a href="../TEAMS/RESEARCH/research.html">RESEARCH</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </header>
  <main>
    <h2>Official Merchandise</h2>
    <p style="max-width:800px; margin:0 auto 2rem; text-align:center;">ReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMeReplaceMe</p>
    <div id="merch-container" class="posts-grid"></div>

    <div id="merch-modal" class="hidden">
      <div id="modal-content">
        <button onclick="document.getElementById('merch-modal').classList.add('hidden')">Close [x]</button>
        <div id="modal-body"></div>
      </div>
    </div>
  </main>
  <footer>
    <p id="copyright">&copy; 2026 The UTSA Cyber Jedis</p>
  </footer>
  <script src="../bg-effect.js"></script>
  <script src="../site-data.js"></script>
  <script>
    async function loadMerch() {
      const container = document.getElementById('merch-container');
      const items = siteData.merch || [];
      
      for (const itemPath of items) {
        const res = await fetch("../" + itemPath);
        const text = await res.text();
        const lines = text.split('\n');
        const title = lines[0].replace('#', '').trim();
        const price = lines.find(l => l.includes('Price:'))?.split(':')[1].trim() || 'TBD';
        
        const card = document.createElement('div');
        card.className = 'post-card';
        card.innerHTML = `
          <div class="post-group-label">SHOP</div>
          <h3>${title}</h3>
          <p><strong>${price}</strong></p>
          <small>Click for details</small>
        `;
        card.onclick = () => {
          document.getElementById('modal-body').innerHTML = marked.parse(text);
          document.getElementById('merch-modal').classList.remove('hidden');
        };
        container.appendChild(card);
      }
    }
    loadMerch();
  </script>
  <script>
    // Update dynamic content from config
    if (window.siteConfig) {
      const titleEl = document.getElementById('site-title');
      const copyrightEl = document.getElementById('copyright');
      
      if (titleEl) titleEl.textContent = `${window.siteConfig.siteName.replace('UTSA ', '')} Shop`;
      if (copyrightEl) copyrightEl.innerHTML = `&copy; ${window.siteConfig.copyrightYear} ${window.siteConfig.copyrightOwner}`;
    }
  </script>
</body>
</html>